"use strict";(("undefined"!=typeof self?self:this).webpackChunkUePage=("undefined"!=typeof self?self:this).webpackChunkUePage||[]).push([[603],{38603:(t,e,r)=>{r.r(e),r.d(e,{dealFormMessage:()=>i});r(69375),r(7212);var n=r(70403),o=r(34651);const c={require:{test:/\S+/,errMsg:"此项不能为空"},number:{test:/^[0-9]+$/,errMsg:"只能输入数字"},email:{test:/^\w+((.\w+)|(-\w+))@[A-Za-z0-9]+((.|-)[A-Za-z0-9]+).[A-Za-z0-9]+$/,errMsg:"请输入正确的邮箱"},phone:{test:/^[1][3,4,5,7,8][0-9]{9}$/,errMsg:"请输入正确的手机号"},date:{test:/^[0-9]{4}-[0-9]{2}-[0-9]{2}(\s[0-9]{2}:[0-9]{2})?$/,errMsg:"请输入正确的时间，格式为 2018-09-10 或者 2018-09-10 21:09"}};function i(t,e={}){const r=o(t).find("."+n.A["form-code-img"]),i=r.attr("src"),s=Object.assign({getCodeImgUrl:()=>"",formSubmit:(t,e)=>Promise.resolve()},e);function a(){const t=s.getCodeImgUrl();t&&r.attr("src",t)}a(),o(t).find(n.A["form-code-img"]).on("click",a);const u=o(t).find("."+n.A["form-row"]),f=o(t).find("."+n.A["submit-btn"]),l=o(t).find("."+n.A["form-row--submit"]),d=n.A["form-msg"];function p(t,e){const r=o(t).find("."+d),{msg:n,type:c}=e;n&&r.length?r.text(n):!n||r.length||o(`<div class="${d}" data-type="${c}">${n}</div>`).appendTo(t)}function m(){o(t).find("."+d).remove()}function h(){m(),g();let t=!0;return u.each((function(e,r){const n=o(r).find("input,select,textarea");if(null==n||!n.length)return;let i="";const s=function(t){let e="";return e="checkbox"===t.eq(0).attr("type")?String(t.filter("input[type='checkbox']:checked").val()||""):"radio"===t.eq(0).attr("type")?String(t.filter("input[type='radio']:checked").val()||""):(t.val()||"").toString().trim(),e}(n),a=o(r).data("ruler").split(",");a.includes("require")&&o(a).each((function(e,n){if(c[n]){c[n].test.test(s.trim())||(t=!1,i=c[n].errMsg)}e==a.length-1&&i.length&&p(r,{type:"warn",msg:i})}))})),t}function g(t){t?l.attr("data-status",t):l.removeAttr("data-status")}let y=!1;return f.on("click",(()=>{if(y)return;if(!h())return void p(l[0],{type:"warn",msg:"请检查表单后重新提交"});g("loading");const e=o(t).serializeArray();s.formSubmit(e,function(t){const e={code:"",type:"",content:"<style>table{border-right:#cccccc 1px solid;border-bottom:#cccccc 1px solid;}tr{ margin:0; padding:0}td,th{ border-left:#cccccc 1px solid;border-top:#cccccc 1px solid; margin:0; padding:0 10px; font-size:14px; background:#f8f8f8; color:#666; line-height:30px}</style>"};if("object"!=typeof t)return e;const r={};t.forEach((t=>{const e=t.name;e in r?r[e].value.push(t.value):r[e]={name:e,value:[t.value]}})),e.content+='<table width="600" border="0" cellspacing="0"> <tbody>';for(const t in r)if(Object.prototype.hasOwnProperty.call(r,t)){const o=r[t];if("code"==o.name)e.code=o.value[0];else if("type"==o.name)e.type=o.value[0];else{var n;e.content+="<tr><th>"+o.name+"</th><td>"+((null===(n=o.value)||void 0===n?void 0:n.toString())||"")+"</td></tr>"}}return e.content+="</tbody> </table>",e.content+='<p style="color:#666; font-size:12px">来自&nbsp;&nbsp;'+window.location.host+"</p>",e}(e)).then((()=>{p(l[0],{type:"success",msg:"提交成功"}),g("success")}),(t=>{g("error"),p(l[0],{type:"warn",msg:t||"提交失败，出现未知错误"})})).finally((()=>{y=!1,a()}))})),{destroy(){y=!1,g(),m(),r.attr("src",i||""),o(t).find(n.A["form-code-img"]).off("click"),f.off("click")}}}},91361:(t,e,r)=>{var n=r(80866),o=r(13174),c=TypeError;t.exports=function(t){if(n(t))return t;throw new c(o(t)+" is not a constructor")}},80866:(t,e,r)=>{var n=r(16881),o=r(5234),c=r(14188),i=r(65438),s=r(5604),a=r(13029),u=function(){},f=s("Reflect","construct"),l=/^\s*(?:class|function)\b/,d=n(l.exec),p=!l.test(u),m=function(t){if(!c(t))return!1;try{return f(u,[],t),!0}catch(t){return!1}},h=function(t){if(!c(t))return!1;switch(i(t)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return p||!!d(l,a(t))}catch(t){return!0}};h.sham=!0,t.exports=!f||o((function(){var t;return m(m.call)||!m(Object)||!m((function(){t=!0}))||t}))?h:m},59444:(t,e,r)=>{var n=r(44977),o=TypeError,c=function(t){var e,r;this.promise=new t((function(t,n){if(void 0!==e||void 0!==r)throw new o("Bad Promise constructor");e=t,r=n})),this.resolve=n(e),this.reject=n(r)};t.exports.f=function(t){return new c(t)}},16453:(t,e,r)=>{var n=r(51488);t.exports=n.Promise},48787:(t,e,r)=>{var n=r(3770),o=r(80831),c=r(59444);t.exports=function(t,e){if(n(t),o(e)&&e.constructor===t)return e;var r=c.f(t);return(0,r.resolve)(e),r.promise}},97964:(t,e,r)=>{var n=r(3770),o=r(91361),c=r(44318),i=r(4282)("species");t.exports=function(t,e){var r,s=n(t).constructor;return void 0===s||c(r=n(s)[i])?e:o(r)}},7212:(t,e,r)=>{var n=r(5613),o=r(1942),c=r(16453),i=r(5234),s=r(5604),a=r(14188),u=r(97964),f=r(48787),l=r(97509),d=c&&c.prototype;if(n({target:"Promise",proto:!0,real:!0,forced:!!c&&i((function(){d.finally.call({then:function(){}},(function(){}))}))},{finally:function(t){var e=u(this,s("Promise")),r=a(t);return this.then(r?function(r){return f(e,t()).then((function(){return r}))}:t,r?function(r){return f(e,t()).then((function(){throw r}))}:t)}}),!o&&a(c)){var p=s("Promise").prototype.finally;d.finally!==p&&l(d,"finally",p,{unsafe:!0})}}}]);